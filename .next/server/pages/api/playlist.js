"use strict";(()=>{var t={};t.id=561,t.ids=[561],t.modules={5600:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1428:t=>{t.exports=import("axios")},6762:(t,e)=>{Object.defineProperty(e,"M",{enumerable:!0,get:function(){return function t(e,r){return r in e?e[r]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,r)):"function"==typeof e&&"default"===r?e:void 0}}})},2481:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.r(e),r.d(e,{config:()=>l,default:()=>c,routeModule:()=>d});var n=r(9947),i=r(2706),o=r(6762),s=r(6832),u=t([s]);s=(u.then?(await u)():u)[0];let c=(0,o.M)(s,"default"),l=(0,o.M)(s,"config"),d=new n.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/playlist",pathname:"/api/playlist",bundlePath:"",filename:""},userland:s});a()}catch(t){a(t)}})},6832:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.r(e),r.d(e,{default:()=>s});var n=r(1428),i=t([n]);n=(i.then?(await i)():i)[0],Buffer.from(`${process.env.REACT_APP_SPOTIFY_CLIENT_ID}:${process.env.REACT_APP_SPOTIFY_CLIENT_SECRET}`).toString("base64");let u=async()=>{try{let t=process.env.REACT_APP_SPOTIFY_CLIENT_ID,e=process.env.REACT_APP_SPOTIFY_CLIENT_SECRET;if(!t||!e)throw Error("Missing Spotify credentials. Check your environment variables.");let r=Buffer.from(`${t}:${e}`).toString("base64");return(await n.default.post("https://accounts.spotify.com/api/token",new URLSearchParams({grant_type:"client_credentials"}).toString(),{headers:{Authorization:`Basic ${r}`,"Content-Type":"application/x-www-form-urlencoded"}})).data.access_token}catch(t){return console.error("Error getting Spotify auth token:",t),null}};async function o(t,e){try{return await n.default.get(t,{headers:{Authorization:`Bearer ${e}`}})}catch(t){throw t}}async function s(t,e){if("GET"!==t.method)return e.status(405).json({error:"Method not allowed"});try{let t=await u();if(!t)return e.status(500).json({error:"Failed to authenticate"});let r=await n.default.get("https://api.spotify.com/v1/playlists/62U2aL9NGYzQm5Y76bdZc8",{headers:{Authorization:`Bearer ${t}`}});if(200===r.status){let a=r.data.tracks.items,n=r.data.tracks.next;for(;n;){let e=await o(n,t);a=[...a,...e.data.items],n=e.data.next}let i=a.map(t=>({release_date:t.track.album.release_date,artist_name:t.track.artists[0].name,artist_id:t.track.artists[0].id,artist_genre:"emo",album_title:t.track.album.name,image_url:t.track.album.images[0].url,album_color:"#445566"}));return e.json(i)}}catch(t){return console.error("Error fetching playlist:",t),e.status(500).json({error:"Failed to fetch playlist"})}}a()}catch(t){a(t)}})},2706:(t,e)=>{Object.defineProperty(e,"A",{enumerable:!0,get:function(){return r}});var r=function(t){return t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE",t.IMAGE="IMAGE",t}({})},9947:(t,e,r)=>{t.exports=r(5600)}};var e=require("../../webpack-api-runtime.js");e.C(t);var r=e(e.s=2481);module.exports=r})();